"use strict";(self["webpackChunkforum_front_end_vue"]=self["webpackChunkforum_front_end_vue"]||[]).push([[777],{2777:function(s,t,e){e.r(t),e.d(t,{default:function(){return D}});var r=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",[e("NavBar"),e("br"),e("div",{staticClass:"container"},[e("UserProfileCard",{attrs:{user:s.user,"is-current-user":s.currentUser.id===s.user.id,"initial-is-followed":s.user.isFollowed}}),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-4"},[e("UserFollowingsCard",{attrs:{followings:s.user.Followings}}),e("br"),e("UserFollowsCard",{attrs:{followers:s.user.Followers}})],1),e("div",{staticClass:"col-md-8"},[e("UserCommentsCard",{attrs:{commentRests:s.user.Comments}}),e("br"),e("UserFavRestsCard",{attrs:{favRests:s.user.FavoritedRestaurants}})],1)])],1)],1)},a=[],l=(e(1703),e(3)),i=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"card mb-3"},[e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"col-md-4"},[e("img",{attrs:{src:s.user.image,width:"300px",height:"300px"}})]),e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[s._v(s._s(s.user.name))]),e("p",{staticClass:"card-text"},[s._v(" "+s._s(s.user.email)+" ")]),e("ul",{staticClass:"list-unstyled list-inline"},[e("li",[e("strong",[s._v(s._s(s.user.commentsLength))]),s._v(" 已評論餐廳")]),e("li",[e("strong",[s._v(s._s(s.user.favoritedRestaurantsLength))]),s._v(" 收藏的餐廳")]),e("li",[e("strong",[s._v(s._s(s.user.followingsLength))]),s._v(" followings (追蹤者)")]),e("li",[e("strong",[s._v(s._s(s.user.followersLength))]),s._v(" followers (追隨者)")])]),e("p",[e("router-link",{attrs:{to:{name:"user-profile-edit",params:{id:s.user.id}}}},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[s._v("edit")])])],1)])])])])},o=[],n=e(6017),d=e(1926),c={props:{user:{type:Object,required:!0},isCurrentUser:{type:Boolean,required:!0},initialIsFollowed:{type:Boolean,required:!0}},data(){return{isFollowed:this.initialIsFollowed}},watch:{initialIsFollowed(s){this.isFollowed=s}},methods:{async addFollowing(s){try{const{data:t}=await n.Z.addFollowing({userId:s});if("error"===t.status)throw new Error(t.message);this.isFollowed=!0}catch(t){console.error(t.message),d.F.fire({icon:"error",title:"無法加入追蹤，請稍後再試"})}},async deleteFollowing(s){try{const{data:t}=await n.Z.deleteFollowing({userId:s});if("error"===t.status)throw new Error(t.message);this.isFollowed=!1}catch(t){console.error(t.message),d.F.fire({icon:"error",title:"無法取消追蹤，請稍後再試"})}}}},u=c,m=e(1001),v=(0,m.Z)(u,i,o,!1,null,null,null),h=v.exports,f=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[s._v(s._s(s.followings.length))]),s._v(" followings (追蹤者) ")]),e("div",{staticClass:"card-body"},s._l(s.followings,(function(s){return e("span",{key:s.id},[e("router-link",{attrs:{to:{name:"user-profile",params:{id:s.id}}}},[e("img",{staticClass:"avatar",attrs:{src:s.image,width:"60",height:"60"}})])],1)})),0)])},g=[],w={props:{followings:{type:Array,required:!0}}},_=w,p=(0,m.Z)(_,f,g,!1,null,null,null),C=p.exports,F=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[s._v(s._s(s.followers.length))]),s._v(" followers (追隨者) ")]),e("div",{staticClass:"card-body"},s._l(s.followers,(function(s){return e("span",{key:s.id},[e("router-link",{attrs:{to:{name:"user-profile",params:{id:s.id}}}},[e("img",{staticClass:"avatar",attrs:{src:s.image,width:"60",height:"60"}})])],1)})),0)])},y=[],b={props:{followers:{type:Array,required:!0}}},R=b,U=(0,m.Z)(R,F,y,!1,null,null,null),k=U.exports,x=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[s._v(s._s(s.commentRests.length))]),s._v(" 已評論餐廳 ")]),e("div",{staticClass:"card-body"},s._l(s.commentRests,(function(s){return e("span",{key:s.id,staticClass:"d-inline-block mx-1 my-1"},[e("router-link",{attrs:{to:{name:"rest",params:{id:s.id}}}},[e("img",{staticClass:"avatar",attrs:{src:s.Restaurant.image,width:"60",height:"60"}})])],1)})),0)])},Z=[],E={props:{commentRests:{type:Array,required:!0}}},L=E,q=(0,m.Z)(L,x,Z,!1,null,null,null),$=q.exports,I=function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("div",{staticClass:"card"},[e("div",{staticClass:"card-header"},[e("strong",[s._v(s._s(s.favRests.length))]),s._v(" 收藏的餐廳 ")]),e("div",{staticClass:"card-body"},s._l(s.favRests,(function(s){return e("span",{key:s.id,staticClass:"d-inline-block mx-1 my-1"},[e("router-link",{attrs:{to:{name:"rest",params:{id:s.id}}}},[e("img",{staticClass:"avatar",attrs:{src:s.image,width:"60",height:"60"}})])],1)})),0)])},A=[],B={props:{favRests:{type:Array,required:!0}}},N=B,O=(0,m.Z)(N,I,A,!1,null,null,null),P=O.exports,j=e(629),K={data(){return{user:{}}},components:{NavBar:l.Z,UserProfileCard:h,UserFollowingsCard:C,UserFollowsCard:k,UserCommentsCard:$,UserFavRestsCard:P},methods:{async fetchUser(s){try{const{data:t,statusText:e}=await n.Z.get(s),{profile:r,isFollowed:a}=t;if("OK"!==e)throw new Error(e);this.user={...this.user,id:r.id,image:r.image,name:r.name,email:r.email,followingsLength:r.Followings.length,followersLength:r.Followers.length,commentsLength:r.Comments.length,favoritedRestaurantsLength:r.FavoritedRestaurants.length,isFollowed:a,Followings:r.Followings,Followers:r.Followers,FavoritedRestaurants:r.FavoritedRestaurants,Comments:r.Comments.filter((s=>s.Restaurant))}}catch(t){d.F.fire({icon:"error",title:"錯誤，請重新嘗試"})}}},computed:{...(0,j.rn)(["currentUser"])},created(){const{id:s}=this.$route.params;this.fetchUser(s)},beforeRouteUpdate(s,t,e){const{id:r}=s.params;this.fetchUser(r),e()}},T=K,z=(0,m.Z)(T,r,a,!1,null,null,null),D=z.exports}}]);
//# sourceMappingURL=777.c9910bff.js.map