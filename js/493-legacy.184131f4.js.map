{"version":3,"file":"js/493-legacy.184131f4.js","mappings":"kLAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,OAAO,CAACG,GAAG,CAAC,OAAS,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwBT,EAAIU,aAAaC,MAAM,KAAMC,cAAc,CAACR,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,QAAQ,CAACS,MAAM,CAAC,IAAM,SAAS,CAACb,EAAIc,GAAG,UAAUV,EAAG,QAAQ,CAACW,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOlB,EAAQ,KAAEmB,WAAW,SAASb,YAAY,eAAeO,MAAM,CAAC,GAAK,OAAO,KAAO,OAAO,KAAO,OAAO,SAAW,GAAG,YAAcb,EAAIgB,MAAMI,SAAS,CAAC,MAASpB,EAAQ,MAAGO,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOa,OAAOC,YAAqBtB,EAAIgB,KAAKR,EAAOa,OAAOH,aAAYd,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,UAAUO,MAAM,CAAC,MAAQ,MAAM,OAAS,MAAM,IAAMb,EAAIuB,SAASnB,EAAG,QAAQ,CAACS,MAAM,CAAC,IAAM,UAAU,CAACb,EAAIc,GAAG,WAAWV,EAAG,QAAQ,CAACE,YAAY,oBAAoBO,MAAM,CAAC,GAAK,QAAQ,KAAO,OAAO,KAAO,QAAQ,OAAS,WAAWN,GAAG,CAAC,OAASP,EAAIwB,sBAAsBpB,EAAG,SAAS,CAACE,YAAY,kBAAkBO,MAAM,CAAC,KAAO,WAAW,CAACb,EAAIc,GAAG,mBACzjCW,EAAkB,G,0HCoDtB,GACEC,KADF,WAEI,MAAO,CACLC,GAAI,EACJJ,MAAO,GACPP,KAAM,GACNY,MAAO,GACPC,cAAc,IAGlBC,QAAS,CACPC,QADJ,WAEM9B,KAAK0B,GAAK1B,KAAK+B,YAAYL,GAC3B1B,KAAKsB,MAAQtB,KAAK+B,YAAYT,MAC9BtB,KAAKe,KAAOf,KAAK+B,YAAYhB,KAC7Bf,KAAK2B,MAAQ3B,KAAK+B,YAAYJ,OAEhCJ,iBAPJ,SAOAS,GACM,IAAN,iBACM,GAAKC,EAAMC,OAAX,CAGE,IAAR,mCACQlC,KAAKmC,KAAKb,MAAQc,IAGtB,aAhBJ,SAgBAJ,GAAA,kKAEA,OAFA,uBAGAK,EAAAA,EAAAA,KAAAA,CACAC,KAAAA,UACAC,MAAAA,YALA,iCAUAC,EAAAR,EAAAA,OACAS,EAAA,gBAXA,SAcA,kBAdA,SAgBAC,EAAAA,EAAAA,OAAAA,CACAC,OAAAA,EAAAA,GACAF,SAAAA,IAlBA,mBAgBAhB,EAhBA,EAgBAA,KAAAmB,EAhBA,EAgBAA,WAKAA,OAAAA,GAAAA,YAAAA,EAAAA,OArBA,uBAsBA,aAtBA,QAyBA,gBAAA7B,KAAAA,OAAA8B,OAAAA,CAAAnB,GAAAA,EAAAA,MAzBA,qDA2BA,kBACAW,EAAAA,EAAAA,KAAAA,CACAC,KAAAA,QACAC,MAAAA,oBA9BA,8DAmCEO,UAAUA,EAAAA,EAAAA,GAAAA,IACZC,EAAAA,EAAAA,IAAAA,CAAAA,iBAEEC,MAAO,CAELjB,YAFJ,SAEAI,GACMnC,KAAK8B,YAGTmB,QAtEF,WAuEI,IAAJ,wBACQvB,EAAGwB,aAAelD,KAAK+B,YAAYL,GAAGwB,WAI1ClD,KAAK8B,UAHH9B,KAAKmD,QAAQC,KAAK,CAAxBrC,KAAAA,eAKEsC,kBA9EF,SA8EAC,EAAAC,EAAAC,GACI,IAAJ,cACQ9B,EAAGwB,aAAelD,KAAK+B,YAAYL,GAAGwB,YAI1ClD,KAAK8B,UACL0B,KAJExD,KAAKmD,QAAQC,KAAK,CAAxBrC,KAAAA,gBCtIwQ,I,UCOpQ0C,GAAY,OACd,EACA3D,EACA0B,GACA,EACA,KACA,KACA,MAIF,EAAeiC,EAAiB","sources":["webpack://forum-front-end-vue/./src/views/UserEditView.vue?acb5","webpack://forum-front-end-vue/src/views/UserEditView.vue","webpack://forum-front-end-vue/./src/views/UserEditView.vue?60c9","webpack://forum-front-end-vue/./src/views/UserEditView.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container py-5\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit.apply(null, arguments)}}},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"name\"}},[_vm._v(\"Name\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],staticClass:\"form-control\",attrs:{\"id\":\"name\",\"type\":\"text\",\"name\":\"name\",\"required\":\"\",\"placeholder\":_vm.name},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_c('div',{staticClass:\"form-group\"},[_c('img',{staticClass:\"d-block\",attrs:{\"width\":\"200\",\"height\":\"200\",\"src\":_vm.image}}),_c('label',{attrs:{\"for\":\"image\"}},[_vm._v(\"Image\")]),_c('input',{staticClass:\"form-control-file\",attrs:{\"id\":\"image\",\"type\":\"file\",\"name\":\"image\",\"accept\":\"image/*\"},on:{\"change\":_vm.handleFileChange}})]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\" Submit \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container py-5\">\r\n    <form @submit.prevent='handleSubmit'>\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name</label>\r\n        <input\r\n          id=\"name\"\r\n          type=\"text\"\r\n          name=\"name\"\r\n          class=\"form-control\"\r\n          required\r\n          :placeholder=\"name\"\r\n          v-model='name'\r\n        >\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n\r\n        <img\r\n          class='d-block'\r\n          width=\"200\"\r\n          height='200'\r\n          :src='image'\r\n        >\r\n\r\n        <label for=\"image\">Image</label>\r\n        <input\r\n          id=\"image\"\r\n          type=\"file\"\r\n          name=\"image\"\r\n          accept=\"image/*\"\r\n          class=\"form-control-file\"\r\n          @change=\"handleFileChange\"\r\n        >\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        class=\"btn btn-primary\"\r\n      >\r\n        Submit\r\n      </button>\r\n    </form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { mapState } from 'vuex'\r\nimport usersAPI from './../apis/users'\r\nimport { Toast } from './../utils/helpers'\r\n\r\n\r\nexport default {\r\n  data(){\r\n    return {\r\n      id: 0,\r\n      image: '',\r\n      name: '',\r\n      email: '',\r\n      isProcessing: false\r\n    }\r\n  },\r\n  methods: {\r\n    setUser () {\r\n      this.id = this.currentUser.id\r\n      this.image = this.currentUser.image\r\n      this.name = this.currentUser.name\r\n      this.email = this.currentUser.email\r\n    },\r\n    handleFileChange(e){\r\n      const { files } = e.target\r\n      if (!files.length){\r\n        return \r\n      } else {\r\n        const imgURL = window.URL.createObjectURL(files[0])\r\n        this.user.image = imgURL\r\n      }\r\n    },\r\n    async handleSubmit(e){\r\n\r\n      if (this.name){\r\n        Toast.fire({\r\n          type: 'warning',\r\n          title: '您尚未填寫姓名'\r\n        })\r\n        return\r\n      }\r\n\r\n      const form = e.target\r\n      const formData = new FormData(form)\r\n\r\n      try {\r\n        this.isProcessing = true\r\n\r\n        const { data, statusText } = await usersAPI.update({\r\n          userId: this.id,\r\n          formData\r\n        })\r\n\r\n        if (statusText !== 'OK' || data.status !== 'success') {\r\n          throw new Error(statusText)\r\n        }\r\n\r\n        this.$router.push({ name: 'user', params: { id: this.id } })\r\n      } catch (error){\r\n        this.isProcessing = false\r\n        Toast.fire({\r\n          type: 'error',\r\n          title: '無法更新使用者資料，請稍後再試'\r\n        })\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState(['currentUser'])\r\n  },\r\n  watch: {\r\n    // eslint-disable-next-line\r\n    currentUser (user) {\r\n      this.setUser()\r\n    }\r\n  },\r\n  created(){\r\n    const { id } = this.$route.params\r\n    if (id.toString() !== this.currentUser.id.toString()) {\r\n      this.$router.push({ name: 'not-found' })\r\n      return\r\n    }\r\n    this.setUser()\r\n  },\r\n  beforeRouteUpdate (to, from, next) {\r\n    const { id } = to.params\r\n    if (id.toString() !== this.currentUser.id.toString()) {\r\n      this.$router.push({ name: 'not-found' })\r\n      return\r\n    }\r\n    this.setUser()\r\n    next()\r\n  },\r\n}\r\n</script>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserEditView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UserEditView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserEditView.vue?vue&type=template&id=218d393e&\"\nimport script from \"./UserEditView.vue?vue&type=script&lang=js&\"\nexport * from \"./UserEditView.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","handleSubmit","apply","arguments","attrs","_v","directives","name","rawName","value","expression","domProps","target","composing","image","handleFileChange","staticRenderFns","data","id","email","isProcessing","methods","setUser","currentUser","e","files","length","user","imgURL","Toast","type","title","form","formData","usersAPI","userId","statusText","params","computed","mapState","watch","created","toString","$router","push","beforeRouteUpdate","to","from","next","component"],"sourceRoot":""}